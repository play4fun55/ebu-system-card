<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.2">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta charset="UTF-8" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;title&gt;EBU System Card – Page 1 Builder&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"&gt;&lt;/script&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>body {</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin: 0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 20px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #f5f5f5;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>h1 {</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin-top: 0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-size: 1.6rem;</p>
<p class="p1"><span class="Apple-converted-space">      </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.container {</p>
<p class="p1"><span class="Apple-converted-space">      </span>max-width: 1100px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin: 0 auto;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #fff;</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 20px 24px 24px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-radius: 10px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>box-shadow: 0 4px 10px rgba(0,0,0,0.08);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>h2 {</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-size: 1.1rem;</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin-top: 18px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-bottom: 1px solid #ddd;</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding-bottom: 4px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>h3 {</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-size: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin-top: 14px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin-bottom: 6px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.grid-2 {</p>
<p class="p1"><span class="Apple-converted-space">      </span>display: grid;</p>
<p class="p1"><span class="Apple-converted-space">      </span>grid-template-columns: repeat(2, minmax(0,1fr));</p>
<p class="p1"><span class="Apple-converted-space">      </span>gap: 12px 24px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.grid-3 {</p>
<p class="p1"><span class="Apple-converted-space">      </span>display: grid;</p>
<p class="p1"><span class="Apple-converted-space">      </span>grid-template-columns: repeat(3, minmax(0,1fr));</p>
<p class="p1"><span class="Apple-converted-space">      </span>gap: 10px 16px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.field {</p>
<p class="p1"><span class="Apple-converted-space">      </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">      </span>flex-direction: column;</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin-top: 8px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>label {</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin-bottom: 4px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-size: 0.92rem;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>input, textarea {</p>
<p class="p1"><span class="Apple-converted-space">      </span>font: inherit;</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 7px 9px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-radius: 6px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border: 1px solid #ccc;</p>
<p class="p1"><span class="Apple-converted-space">      </span>box-sizing: border-box;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>textarea {</p>
<p class="p1"><span class="Apple-converted-space">      </span>resize: vertical;</p>
<p class="p1"><span class="Apple-converted-space">      </span>min-height: 60px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.small {</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-size: 0.85rem;</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: #555;</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin-top: 2px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.actions {</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin-top: 18px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">      </span>flex-wrap: wrap;</p>
<p class="p1"><span class="Apple-converted-space">      </span>gap: 10px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>justify-content: flex-end;</p>
<p class="p1"><span class="Apple-converted-space">      </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>button {</p>
<p class="p1"><span class="Apple-converted-space">      </span>border: none;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-radius: 999px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 8px 18px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>font: inherit;</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #1e88e5;</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: white;</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-weight: 600;</p>
<p class="p1"><span class="Apple-converted-space">      </span>transition: transform 0.05s ease, box-shadow 0.05s ease, opacity 0.2s;</p>
<p class="p1"><span class="Apple-converted-space">      </span>box-shadow: 0 2px 6px rgba(0,0,0,0.18);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>button.secondary {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #e0e0e0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: #333;</p>
<p class="p1"><span class="Apple-converted-space">      </span>box-shadow: none;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>button:disabled {</p>
<p class="p1"><span class="Apple-converted-space">      </span>opacity: 0.5;</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursor: not-allowed;</p>
<p class="p1"><span class="Apple-converted-space">      </span>box-shadow: none;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>button:not(:disabled):hover {</p>
<p class="p1"><span class="Apple-converted-space">      </span>transform: translateY(-1px);</p>
<p class="p1"><span class="Apple-converted-space">      </span>box-shadow: 0 4px 12px rgba(0,0,0,0.2);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.status {</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-size: 0.85rem;</p>
<p class="p1"><span class="Apple-converted-space">      </span>color: #388e3c;</p>
<p class="p1"><span class="Apple-converted-space">      </span>min-height: 1.2em;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>@media (max-width: 800px) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>.grid-2, .grid-3 {</p>
<p class="p1"><span class="Apple-converted-space">        </span>grid-template-columns: 1fr;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div class="container"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h1&gt;EBU System Card – Page 1 Builder&lt;/h1&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- HEADER --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h2&gt;Header&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="grid-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="playerName"&gt;Your name&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;input id="playerName" type="text" value="Espen Gisvold" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="playerNumber"&gt;Your EBU number&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;input id="playerNumber" type="text" value="491316" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="partnerName"&gt;Partner's name&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;input id="partnerName" type="text" value="Svein Erik Dahl" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="partnerNumber"&gt;Partner's EBU number&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;input id="partnerNumber" type="text" value="525143" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;label for="biddingDescription"&gt;General description of bidding methods&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;textarea id="biddingDescription"&gt;2 over 1 GF, 5♠,4♥,4♦,3♣ &amp;amp; 15–17 NT&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- 1NT OPENINGS --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h2&gt;1NT Openings and Responses&lt;/h2&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="grid-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="ntStrength"&gt;1NT strength&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;input id="ntStrength" type="text" value="15–17" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="ntStrengthArtificial"&gt;If artificial – details&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="ntStrengthArtificial"&gt;&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="ntShape"&gt;Shape constraints&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="ntShape"&gt;No singleton or void. No 6-card major or 7-card minor&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="ntShapeArtificial"&gt;If may have singleton – details&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="ntShapeArtificial"&gt;May contain singleton Ace or King&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h3&gt;Responses to 1NT&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="grid-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="nt2c"&gt;2♣ – meaning&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="nt2c"&gt;Stayman, may be weak, may take to minor&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="nt2d"&gt;2♦ – meaning&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="nt2d"&gt;Transfer to ♥ (break xx)&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="nt2h"&gt;2♥ – meaning&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="nt2h"&gt;Transfer to ♠ (break xx)&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="nt2s"&gt;2♠ – meaning&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="nt2s"&gt;Minor-suit Stayman: 2NT = 3–3, 3♣/3♦ = longer minor&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="nt2nt"&gt;2NT – meaning&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="nt2nt"&gt;Transfer to ♣&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="ntOthers"&gt;Other 1NT responses&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="ntOthers"&gt;3♣ – transfer to ♦; 3♦ = 4-4-4-1 with a major; 3♥/3♠ = that major + 4/5 minors&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="grid-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="afterDouble"&gt;Action after opponents double&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="afterDouble"&gt;Redouble = to play; all two-level bids are transfers (escape system)&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="afterInterference"&gt;Action after other interference&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="afterInterference"&gt;Lebensohl; double shows values. Transfer over 2♣/2♦ natural; penalties over 2♥/2♠&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- TWO-LEVEL OPENINGS --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h2&gt;Two-level openings and responses&lt;/h2&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="field small"&gt;“Notes” column on page 1 shows a note number; the actual text appears on page 4.&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h3&gt;2♣&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="grid-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="twoCMeaning"&gt;Meaning&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="twoCMeaning"&gt;23+ balanced or 9+ tricks. 2♦ weak/waiting; positive = 8+ with a good suit.&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="twoCResponses"&gt;Responses&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="twoCResponses"&gt;2♦ waiting, strong or weak; 2M = strong 6-card suit. After 2♣–2♦, 2NT/3♣ = puppet Stayman.&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="twoCNotes"&gt;Note text (note 1)&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="twoCNotes"&gt;&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h3&gt;2♦&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="grid-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="twoDMeaning"&gt;Meaning&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="twoDMeaning"&gt;Multi: weak 2♥/2♠ or 20–22 balanced.&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="twoDResponses"&gt;Responses&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="twoDResponses"&gt;2♥/2♠: pass or correct. 2NT relay; 3♣ = ♥ minimum; 3♠ = ♥ maximum etc.&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="twoDNotes"&gt;Note text (note 2)&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="twoDNotes"&gt;&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h3&gt;2♥&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="grid-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="twoHMeaning"&gt;Meaning&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="twoHMeaning"&gt;5♥ and 4+ in another suit.&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="twoHResponses"&gt;Responses&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="twoHResponses"&gt;2NT enquiry; 3♦ = major-suit invite.&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="twoHNotes"&gt;Note text (note 3)&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="twoHNotes"&gt;&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h3&gt;2♠&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="grid-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="twoSMeaning"&gt;Meaning&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="twoSMeaning"&gt;5♠ and 4+ in ♣/♦.&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="twoSResponses"&gt;Responses&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="twoSResponses"&gt;2NT enquiry; 3♦ = major-suit invite.&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="twoSNotes"&gt;Note text (note 4)&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="twoSNotes"&gt;&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h3&gt;2NT&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="grid-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="twoNTMeaning"&gt;Meaning&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="twoNTMeaning"&gt;Both minors, 5-5 in principle.&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="twoNTResponses"&gt;Responses&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="twoNTResponses"&gt;&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label for="twoNTNotes"&gt;Note text (note 5)&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="twoNTNotes"&gt;&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- OTHER ASPECTS --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h2&gt;Other aspects of system which opponents should note&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;textarea id="otherAspects"&gt;Over 1-of-a-suit: 1NT = highest &amp; lowest unbid suits; 2♣ = two lowest unbid suits; 2♦ = two highest unbid suits. Length 4+/4+. 6 HCP+ non-vul, 8+ vul; with 5-5, bid one level higher.&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- ACTIONS --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="actions"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;span id="status" class="status"&gt;&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;button id="saveBtn" class="secondary" disabled&gt;Save and continue&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;button id="publishBtn" disabled&gt;Publish PDF (4-page card layout)&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const $ = id =&gt; document.getElementById(id);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const fields = [</p>
<p class="p1"><span class="Apple-converted-space">      </span>"playerName","playerNumber","partnerName","partnerNumber",</p>
<p class="p1"><span class="Apple-converted-space">      </span>"biddingDescription","ntStrength","ntStrengthArtificial",</p>
<p class="p1"><span class="Apple-converted-space">      </span>"ntShape","ntShapeArtificial","nt2c","nt2d","nt2h","nt2s",</p>
<p class="p1"><span class="Apple-converted-space">      </span>"nt2nt","ntOthers","afterDouble","afterInterference",</p>
<p class="p1"><span class="Apple-converted-space">      </span>"twoCMeaning","twoCResponses","twoCNotes",</p>
<p class="p1"><span class="Apple-converted-space">      </span>"twoDMeaning","twoDResponses","twoDNotes",</p>
<p class="p1"><span class="Apple-converted-space">      </span>"twoHMeaning","twoHResponses","twoHNotes",</p>
<p class="p1"><span class="Apple-converted-space">      </span>"twoSMeaning","twoSResponses","twoSNotes",</p>
<p class="p1"><span class="Apple-converted-space">      </span>"twoNTMeaning","twoNTResponses","twoNTNotes",</p>
<p class="p1"><span class="Apple-converted-space">      </span>"otherAspects"</p>
<p class="p1"><span class="Apple-converted-space">    </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const statusEl = $("status");</p>
<p class="p1"><span class="Apple-converted-space">    </span>const saveBtn = $("saveBtn");</p>
<p class="p1"><span class="Apple-converted-space">    </span>const publishBtn = $("publishBtn");</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// ---------- FONT LOADING (UNICODE / SUITS) ----------</p>
<p class="p1"><span class="Apple-converted-space">    </span>let fontLoaded = false;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let fontPromise = null;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>async function ensureFont(doc) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (fontLoaded) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.setFont("NotoSans", "normal");</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!fontPromise) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Regular and bold Noto Sans from fonts.gstatic.com (CORS-enabled)</p>
<p class="p1"><span class="Apple-converted-space">        </span>const regularUrl = "https://fonts.gstatic.com/s/notosans/v27/o-0FIpksx3YVZb_r2wZP.ttf";</p>
<p class="p1"><span class="Apple-converted-space">        </span>const boldUrl<span class="Apple-converted-space">    </span>= "https://fonts.gstatic.com/s/notosans/v27/o-0NIpksx3YVZbWx3zrQ9.ttf";</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>fontPromise = Promise.all([</p>
<p class="p1"><span class="Apple-converted-space">          </span>fetch(regularUrl).then(r =&gt; r.arrayBuffer()),</p>
<p class="p1"><span class="Apple-converted-space">          </span>fetch(boldUrl).then(r =&gt; r.arrayBuffer())</p>
<p class="p1"><span class="Apple-converted-space">        </span>]).then(([regBuf, boldBuf]) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">          </span>function toBase64(buf) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const bytes = new Uint8Array(buf);</p>
<p class="p1"><span class="Apple-converted-space">            </span>let binary = "";</p>
<p class="p1"><span class="Apple-converted-space">            </span>for (let i = 0; i &lt; bytes.length; i++) {</p>
<p class="p1"><span class="Apple-converted-space">              </span>binary += String.fromCharCode(bytes[i]);</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>return btoa(binary);</p>
<p class="p1"><span class="Apple-converted-space">          </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>const regB64 = toBase64(regBuf);</p>
<p class="p1"><span class="Apple-converted-space">          </span>const boldB64 = toBase64(boldBuf);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>doc.addFileToVFS("NotoSans-Regular.ttf", regB64);</p>
<p class="p1"><span class="Apple-converted-space">          </span>doc.addFont("NotoSans-Regular.ttf", "NotoSans", "normal");</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>doc.addFileToVFS("NotoSans-Bold.ttf", boldB64);</p>
<p class="p1"><span class="Apple-converted-space">          </span>doc.addFont("NotoSans-Bold.ttf", "NotoSans", "bold");</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">          </span>fontLoaded = true;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}).catch(err =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">          </span>console.error("Font load failed; falling back to built-in font.", err);</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>await fontPromise;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (fontLoaded) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.setFont("NotoSans", "normal");</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.setFont("helvetica", "normal"); // fallback</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// ---------- DATA &amp; VALIDATION ----------</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const tmpTextArea = document.createElement("textarea");</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function decodeHtmlEntities(str) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!str) return "";</p>
<p class="p1"><span class="Apple-converted-space">      </span>tmpTextArea.innerHTML = str;</p>
<p class="p1"><span class="Apple-converted-space">      </span>let s = tmpTextArea.value;</p>
<p class="p1"><span class="Apple-converted-space">      </span>s = s.replace(/&amp;#(\d+);/g, (_, num) =&gt; String.fromCharCode(parseInt(num, 10)));</p>
<p class="p1"><span class="Apple-converted-space">      </span>s = s</p>
<p class="p1"><span class="Apple-converted-space">        </span>.replace(/&amp;clubs;?/gi, "♣")</p>
<p class="p1"><span class="Apple-converted-space">        </span>.replace(/&amp;hearts;?/gi, "♥")</p>
<p class="p1"><span class="Apple-converted-space">        </span>.replace(/&amp;diams;?|&amp;diamonds;?/gi, "♦")</p>
<p class="p1"><span class="Apple-converted-space">        </span>.replace(/&amp;spades;?/gi, "♠");</p>
<p class="p1"><span class="Apple-converted-space">      </span>return s;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function getData() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const data = {};</p>
<p class="p1"><span class="Apple-converted-space">      </span>fields.forEach(f =&gt; data[f] = decodeHtmlEntities($(f).value.trim()));</p>
<p class="p1"><span class="Apple-converted-space">      </span>return data;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function validateRequired() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const d = getData();</p>
<p class="p1"><span class="Apple-converted-space">      </span>const ok = d.playerName &amp;&amp; d.playerNumber &amp;&amp;</p>
<p class="p1"><span class="Apple-converted-space">                 </span>d.partnerName &amp;&amp; d.partnerNumber &amp;&amp;</p>
<p class="p1"><span class="Apple-converted-space">                 </span>d.biddingDescription;</p>
<p class="p1"><span class="Apple-converted-space">      </span>saveBtn.disabled = !ok;</p>
<p class="p1"><span class="Apple-converted-space">      </span>publishBtn.disabled = !ok;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>fields.forEach(f =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>$(f).addEventListener("input", () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>validateRequired();</p>
<p class="p1"><span class="Apple-converted-space">        </span>statusEl.textContent = "";</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>(function restore() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>try {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const raw = localStorage.getItem("ebuSystemCardPage1");</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (!raw) { validateRequired(); return; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>const data = JSON.parse(raw);</p>
<p class="p1"><span class="Apple-converted-space">        </span>fields.forEach(f =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">          </span>if (data[f] !== undefined) $(f).value = data[f];</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">      </span>} catch (_) {}</p>
<p class="p1"><span class="Apple-converted-space">      </span>validateRequired();</p>
<p class="p1"><span class="Apple-converted-space">    </span>})();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>saveBtn.addEventListener("click", () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>localStorage.setItem("ebuSystemCardPage1", JSON.stringify(getData()));</p>
<p class="p1"><span class="Apple-converted-space">      </span>statusEl.textContent = "Saved. (Next step: page 2 builder.)";</p>
<p class="p1"><span class="Apple-converted-space">      </span>setTimeout(() =&gt; statusEl.textContent = "", 3000);</p>
<p class="p1"><span class="Apple-converted-space">      </span>// Later: navigation to page 2 editor goes here.</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>publishBtn.addEventListener("click", async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>await generatePdf(getData());</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// ---------- PDF GENERATION ----------</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>async function generatePdf(data) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const { jsPDF } = window.jspdf;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const doc = new jsPDF({ orientation: "landscape", unit: "pt", format: "a4" });</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>await ensureFont(doc);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const pageW = doc.internal.pageSize.getWidth();</p>
<p class="p1"><span class="Apple-converted-space">      </span>const pageH = doc.internal.pageSize.getHeight();</p>
<p class="p1"><span class="Apple-converted-space">      </span>const margin = 24;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const gap = 12;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const panelW = (pageW - 2 * margin - gap) / 2;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const panelH = pageH - 2 * margin;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// SHEET 1: Page 4 (left) + Page 1 (right)</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawPage4(doc, margin, margin, panelW, panelH, data);</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawPage1(doc, margin + panelW + gap, margin, panelW, panelH, data);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// SHEET 2: Page 2 (left) + Page 3 (right)</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.addPage();</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawPage2(doc, margin, margin, panelW, panelH);</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawPage3(doc, margin + panelW + gap, margin, panelW, panelH);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.save("ebu-system-card.pdf");</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// ---------- DRAWING HELPERS ----------</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function setFontRegular(doc, size) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.setFont("NotoSans", "normal");</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.setFontSize(size);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>function setFontBold(doc, size) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.setFont("NotoSans", "bold");</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.setFontSize(size);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function drawFrame(doc, x, y, w, h) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.setLineWidth(1.0);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.rect(x, y, w, h);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function drawCenteredText(doc, text, x, y, size, bold = false) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (bold) setFontBold(doc, size); else setFontRegular(doc, size);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.text(text, x, y, { align: "center" });</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function drawHeaderRow(doc, x, y, w, h, text, size = 9) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.setLineWidth(0.6);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.rect(x, y, w, h);</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawCenteredText(doc, text, x + w / 2, y + h / 2 + 3, size, true);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function drawLabelCell(doc, x, y, w, h, label, text) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.setLineWidth(0.4);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.rect(x, y, w, h);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>setFontBold(doc, 7.5);</p>
<p class="p1"><span class="Apple-converted-space">      </span>const labelLines = doc.splitTextToSize(label || "", w - 6);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.text(labelLines, x + 3, y + 9);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const bodyStartY = y + 9 + labelLines.length * 8 + 2;</p>
<p class="p1"><span class="Apple-converted-space">      </span>setFontRegular(doc, 7);</p>
<p class="p1"><span class="Apple-converted-space">      </span>const body = doc.splitTextToSize(text || "", w - 6);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.text(body, x + 3, bodyStartY);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function drawPage1(doc, x, y, w, h, d) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawFrame(doc, x, y, w, h);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const innerPad = 6;</p>
<p class="p1"><span class="Apple-converted-space">      </span>let cursorY = y + innerPad;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Top name area</p>
<p class="p1"><span class="Apple-converted-space">      </span>const topH = 45;</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.setLineWidth(0.6);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.rect(x + innerPad, cursorY, w - 2 * innerPad, topH);</p>
<p class="p1"><span class="Apple-converted-space">      </span>const leftX = x + innerPad + 6;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const rightX = x + w - innerPad - 6;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>setFontBold(doc, 9.5);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.text("Name", leftX, cursorY + 14);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.text("Partner", leftX, cursorY + 32);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>setFontRegular(doc, 9);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.text(d.playerName || "", leftX + 45, cursorY + 14);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.text(d.partnerName || "", leftX + 45, cursorY + 32);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>setFontBold(doc, 9);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.text("EBU No. " + (d.playerNumber || ""), rightX, cursorY + 14, { align: "right" });</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.text("EBU No. " + (d.partnerNumber || ""), rightX, cursorY + 32, { align: "right" });</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>cursorY += topH + 4;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// General description header</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawHeaderRow(doc, x + innerPad, cursorY, w - 2 * innerPad, 20,</p>
<p class="p1"><span class="Apple-converted-space">        </span>"GENERAL DESCRIPTION OF BIDDING METHODS", 9);</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursorY += 20;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Description line</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.setLineWidth(0.6);</p>
<p class="p1"><span class="Apple-converted-space">      </span>const descH = 22;</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.rect(x + innerPad, cursorY, w - 2 * innerPad, descH);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setFontBold(doc, 8.5);</p>
<p class="p1"><span class="Apple-converted-space">      </span>const descLines = doc.splitTextToSize(d.biddingDescription || "", w - 2 * innerPad - 8);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.text(descLines, x + w / 2, cursorY + 14, { align: "center" });</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursorY += descH + 3;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// 1NT Openings header</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawHeaderRow(doc, x + innerPad, cursorY, w - 2 * innerPad, 18,</p>
<p class="p1"><span class="Apple-converted-space">        </span>"1NT OPENINGS AND RESPONSES", 9);</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursorY += 18 + 1;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Strength &amp; Shape rows</p>
<p class="p1"><span class="Apple-converted-space">      </span>const rowH = 32;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const colLabelW = 80;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const colMainW = 150;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const colRestW = (w - 2 * innerPad) - colLabelW - colMainW;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>drawLabelCell(doc, x + innerPad, cursorY, colLabelW, rowH,</p>
<p class="p1"><span class="Apple-converted-space">        </span>"Strength", d.ntStrength || "");</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawLabelCell(doc, x + innerPad + colLabelW, cursorY, colMainW, rowH,</p>
<p class="p1"><span class="Apple-converted-space">        </span>"", "");</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawLabelCell(doc, x + innerPad + colLabelW + colMainW, cursorY, colRestW, rowH,</p>
<p class="p1"><span class="Apple-converted-space">        </span>"If artificial – details", d.ntStrengthArtificial || "");</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursorY += rowH;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>drawLabelCell(doc, x + innerPad, cursorY, colLabelW, rowH,</p>
<p class="p1"><span class="Apple-converted-space">        </span>"Shape constraints", "");</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawLabelCell(doc, x + innerPad + colLabelW, cursorY, colMainW, rowH,</p>
<p class="p1"><span class="Apple-converted-space">        </span>"", d.ntShape || "");</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawLabelCell(doc, x + innerPad + colLabelW + colMainW, cursorY, colRestW, rowH,</p>
<p class="p1"><span class="Apple-converted-space">        </span>"If may have singleton – details", d.ntShapeArtificial || "");</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursorY += rowH + 3;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Responses heading</p>
<p class="p1"><span class="Apple-converted-space">      </span>const respHeadH = 16;</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.setLineWidth(0.4);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.rect(x + innerPad, cursorY, w - 2 * innerPad, respHeadH);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setFontBold(doc, 8);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.text("Responses", x + innerPad + 3, cursorY + 11);</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursorY += respHeadH;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Responses grid</p>
<p class="p1"><span class="Apple-converted-space">      </span>const respRowH = 26;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const halfW = (w - 2 * innerPad) / 2;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>function respRow(label1, text1, label2, text2) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.setLineWidth(0.4);</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.rect(x + innerPad, cursorY, halfW, respRowH);</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.rect(x + innerPad + halfW, cursorY, halfW, respRowH);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>setFontBold(doc, 8);</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.text(label1, x + innerPad + 3, cursorY + 10);</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.text(label2, x + innerPad + halfW + 3, cursorY + 10);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>setFontRegular(doc, 7);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const t1 = doc.splitTextToSize(text1 || "", halfW - 6);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const t2 = doc.splitTextToSize(text2 || "", halfW - 6);</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.text(t1, x + innerPad + 3, cursorY + 18);</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.text(t2, x + innerPad + halfW + 3, cursorY + 18);</p>
<p class="p1"><span class="Apple-converted-space">        </span>cursorY += respRowH;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>respRow("2♣", d.nt2c, "2♦", d.nt2d);</p>
<p class="p1"><span class="Apple-converted-space">      </span>respRow("2♥", d.nt2h, "2♠", d.nt2s);</p>
<p class="p1"><span class="Apple-converted-space">      </span>respRow("2NT", d.nt2nt, "Others", d.ntOthers);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const actH = 26;</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawLabelCell(doc, x + innerPad, cursorY, colLabelW, actH,</p>
<p class="p1"><span class="Apple-converted-space">        </span>"Action after opponents double", "");</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawLabelCell(doc, x + innerPad + colLabelW, cursorY,</p>
<p class="p1"><span class="Apple-converted-space">        </span>(w - 2 * innerPad) - colLabelW, actH,</p>
<p class="p1"><span class="Apple-converted-space">        </span>"", d.afterDouble || "");</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursorY += actH;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>drawLabelCell(doc, x + innerPad, cursorY, colLabelW, actH,</p>
<p class="p1"><span class="Apple-converted-space">        </span>"Action after other interference", "");</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawLabelCell(doc, x + innerPad + colLabelW, cursorY,</p>
<p class="p1"><span class="Apple-converted-space">        </span>(w - 2 * innerPad) - colLabelW, actH,</p>
<p class="p1"><span class="Apple-converted-space">        </span>"", d.afterInterference || "");</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursorY += actH + 4;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Two-level openings header</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawHeaderRow(doc, x + innerPad, cursorY, w - 2 * innerPad, 18,</p>
<p class="p1"><span class="Apple-converted-space">        </span>"TWO-LEVEL OPENINGS AND RESPONSES", 9);</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursorY += 18;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Table header</p>
<p class="p1"><span class="Apple-converted-space">      </span>const headerH = 16;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const col1 = 32;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const col2 = 165;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const col3 = 165;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const col4 = (w - 2 * innerPad) - (col1 + col2 + col3);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.setLineWidth(0.4);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.rect(x + innerPad, cursorY, w - 2 * innerPad, headerH);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setFontBold(doc, 8);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.text("Meaning", x + innerPad + col1 + 4, cursorY + 11);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.text("Responses", x + innerPad + col1 + col2 + 4, cursorY + 11);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.text("Notes", x + innerPad + col1 + col2 + col3 + 4, cursorY + 11);</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursorY += headerH;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>function openingRow(label, m, r, noteText, noteIndex) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const rowH = 26;</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.rect(x + innerPad, cursorY, col1, rowH);</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.rect(x + innerPad + col1, cursorY, col2, rowH);</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.rect(x + innerPad + col1 + col2, cursorY, col3, rowH);</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.rect(x + innerPad + col1 + col2 + col3, cursorY, col4, rowH);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>setFontBold(doc, 9);</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.text(label, x + innerPad + 4, cursorY + 16);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>setFontRegular(doc, 7);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const tm = doc.splitTextToSize(m || "", col2 - 6);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const tr = doc.splitTextToSize(r || "", col3 - 6);</p>
<p class="p1"><span class="Apple-converted-space">        </span>const displayNote = (noteText &amp;&amp; noteText.length &gt; 0) ? String(noteIndex) : "";</p>
<p class="p1"><span class="Apple-converted-space">        </span>const tn = doc.splitTextToSize(displayNote, col4 - 6);</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.text(tm, x + innerPad + col1 + 3, cursorY + 11);</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.text(tr, x + innerPad + col1 + col2 + 3, cursorY + 11);</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.text(tn, x + innerPad + col1 + col2 + col3 + 3, cursorY + 16);</p>
<p class="p1"><span class="Apple-converted-space">        </span>cursorY += rowH;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>openingRow("2♣", d.twoCMeaning, d.twoCResponses, d.twoCNotes, 1);</p>
<p class="p1"><span class="Apple-converted-space">      </span>openingRow("2♦", d.twoDMeaning, d.twoDResponses, d.twoDNotes, 2);</p>
<p class="p1"><span class="Apple-converted-space">      </span>openingRow("2♥", d.twoHMeaning, d.twoHResponses, d.twoHNotes, 3);</p>
<p class="p1"><span class="Apple-converted-space">      </span>openingRow("2♠", d.twoSMeaning, d.twoSResponses, d.twoSNotes, 4);</p>
<p class="p1"><span class="Apple-converted-space">      </span>openingRow("2NT", d.twoNTMeaning, d.twoNTResponses, d.twoNTNotes, 5);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>cursorY += 3;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Other aspects</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawHeaderRow(doc, x + innerPad, cursorY, w - 2 * innerPad, 18,</p>
<p class="p1"><span class="Apple-converted-space">        </span>"OTHER ASPECTS OF SYSTEM WHICH OPPONENTS SHOULD NOTE", 9);</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursorY += 18;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const restH = y + h - cursorY - innerPad;</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.setLineWidth(0.4);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.rect(x + innerPad, cursorY, w - 2 * innerPad, restH);</p>
<p class="p1"><span class="Apple-converted-space">      </span>setFontRegular(doc, 7);</p>
<p class="p1"><span class="Apple-converted-space">      </span>const otherLines = doc.splitTextToSize(d.otherAspects || "", w - 2 * innerPad - 6);</p>
<p class="p1"><span class="Apple-converted-space">      </span>doc.text(otherLines, x + innerPad + 3, cursorY + 11);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function drawPage2(doc, x, y, w, h) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawFrame(doc, x, y, w, h);</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawCenteredText(doc, "PAGE 2 – to be defined", x + w / 2, y + h / 2, 12, true);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function drawPage3(doc, x, y, w, h) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawFrame(doc, x, y, w, h);</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawCenteredText(doc, "PAGE 3 – to be defined", x + w / 2, y + h / 2, 12, true);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function drawPage4(doc, x, y, w, h, d) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawFrame(doc, x, y, w, h);</p>
<p class="p1"><span class="Apple-converted-space">      </span>const innerPad = 8;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const headerH = 24;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Header at top</p>
<p class="p1"><span class="Apple-converted-space">      </span>drawHeaderRow(doc, x + innerPad, y + innerPad,</p>
<p class="p1"><span class="Apple-converted-space">        </span>w - 2 * innerPad, headerH,</p>
<p class="p1"><span class="Apple-converted-space">        </span>"SYSTEM NOTES (from page 1)", 10);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>setFontRegular(doc, 8);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const notesData = [</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ n: 1, text: d.twoCNotes },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ n: 2, text: d.twoDNotes },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ n: 3, text: d.twoHNotes },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ n: 4, text: d.twoSNotes },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ n: 5, text: d.twoNTNotes }</p>
<p class="p1"><span class="Apple-converted-space">      </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const maxWidth = w - 2 * innerPad - 6;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const lineHeight = 10;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const gap = 4;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const rendered = [];</p>
<p class="p1"><span class="Apple-converted-space">      </span>notesData.forEach(note =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (!note.text || note.text.trim().length === 0) return;</p>
<p class="p1"><span class="Apple-converted-space">        </span>const prefix = note.n + ". ";</p>
<p class="p1"><span class="Apple-converted-space">        </span>const lines = doc.splitTextToSize(prefix + note.text, maxWidth);</p>
<p class="p1"><span class="Apple-converted-space">        </span>rendered.push({ lines });</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (rendered.length === 0) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const msg = "No notes defined yet.";</p>
<p class="p1"><span class="Apple-converted-space">        </span>const startY = y + h - innerPad - lineHeight;</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.text(msg, x + innerPad + 3, startY);</p>
<p class="p1"><span class="Apple-converted-space">        </span>return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>let totalHeight = 0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>rendered.forEach(r =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>totalHeight += r.lines.length * lineHeight + gap;</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const minY = y + innerPad + headerH + 10;</p>
<p class="p1"><span class="Apple-converted-space">      </span>let startY = y + h - innerPad - totalHeight;</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (startY &lt; minY) startY = minY;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>let cursorY = startY;</p>
<p class="p1"><span class="Apple-converted-space">      </span>rendered.forEach(r =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>doc.text(r.lines, x + innerPad + 3, cursorY);</p>
<p class="p1"><span class="Apple-converted-space">        </span>cursorY += r.lines.length * lineHeight + gap;</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
